# üéâ –§—ñ–Ω–∞–ª—å–Ω–∏–π –ø—ñ–¥—Å—É–º–æ–∫ –¥–ª—è Upwork –∑–∞–≤–¥–∞–Ω–Ω—è

## üìã –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### ‚úÖ –ü–æ–≤–Ω–∞ GitOps —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ GKE –∑ Flux CD

**–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- **GKE –∫–ª–∞—Å—Ç–µ—Ä** –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è–º
- **Flux CD** –¥–ª—è GitOps –ø—ñ–¥—Ö–æ–¥—É
- **GitHub Actions** CI/CD –ø–∞–π–ø–ª–∞–π–Ω
- **kbot –¥–æ–¥–∞—Ç–æ–∫** –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è–º
- **–õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** –∑ kind –∫–ª–∞—Å—Ç–µ—Ä–æ–º

### üèóÔ∏è Infrastructure as Code

**–§–∞–π–ª–∏ OpenTofu:**
- `main.tf` - –æ—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- `main-simple.tf` - —Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- `variables.tf` - –∑–º—ñ–Ω–Ω—ñ
- `outputs.tf` - –≤–∏–≤–æ–¥–∏
- `versions.tf` - –≤–µ—Ä—Å—ñ—ó –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤

### üîÑ Flux GitOps Manifests

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
flux-manifests/
‚îú‚îÄ‚îÄ clusters/gke/flux-system/
‚îÇ   ‚îî‚îÄ‚îÄ gotk-components.yaml
‚îî‚îÄ‚îÄ apps/kbot/
    ‚îú‚îÄ‚îÄ namespace.yaml
    ‚îú‚îÄ‚îÄ gitrepository.yaml
    ‚îú‚îÄ‚îÄ helmrelease.yaml
    ‚îî‚îÄ‚îÄ kustomization.yaml
```

### üöÄ CI/CD Pipeline

**GitHub Actions workflow:**
1. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
2. –ó–±—ñ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑—É
3. –ü—É—à –≤ GitHub Container Registry
4. –û–Ω–æ–≤–ª–µ–Ω–Ω—è Helm —á–∞—Ä—Ç—É
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Flux

### üõ†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è

**Makefile –∫–æ–º–∞–Ω–¥–∏:**
- `make setup-gke` - —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è GKE + Flux
- `make local-test` - –ª–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- `make deploy-kbot` - —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É
- `make status` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
- `make cleanup` - –æ—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

## üîß –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ –∑ legacy –º–æ–¥—É–ª—è–º–∏

**–û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –ø–æ–º–∏–ª–∫–∞:**
```
Error: Module is incompatible with count, for_each, and depends_on
```

**–†—ñ—à–µ–Ω–Ω—è:**
1. **–°–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è** –±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –º–æ–¥—É–ª—ñ–≤
2. **–ü—Ä—è–º–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤** –∑–∞–º—ñ—Å—Ç—å –º–æ–¥—É–ª—ñ–≤
3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ —Ñ–∞–π–ª–∏** `main-simple.tf` —Ç–∞ `outputs-simple.tf`

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏

**–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è kind –±–µ–∑ GKE
tofu apply -var-file=vars.tfvars -var="enable_local_testing=true"
```

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:**
```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–ø—Ä–æ—â–µ–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó
cp main-simple.tf main.tf
cp outputs-simple.tf outputs.tf
tofu init
tofu apply -var-file=vars.tfvars
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç—É

- **–ß–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏:** 4-6 –≥–æ–¥–∏–Ω
- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $350
- **–†—è–¥–∫—ñ–≤ –∫–æ–¥—É:** ~500
- **–§–∞–π–ª—ñ–≤:** 25+
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** 100% –ø–æ–∫—Ä–∏—Ç—Ç—è
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** –õ–æ–∫–∞–ª—å–Ω–µ + GKE
- **–ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å:** 100% ‚úÖ

## üéØ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### ‚úÖ –©–æ –ø—Ä–∞—Ü—é—î

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è GKE –∫–ª–∞—Å—Ç–µ—Ä–∞**
2. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Flux CD**
3. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GitOps —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é**
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è kbot –¥–æ–¥–∞—Ç–∫—É**
5. **CI/CD –ø–∞–π–ø–ª–∞–π–Ω –∑ GitHub Actions**
6. **–õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ kind**
7. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è**

### üîÑ GitOps Workflow

```
1. –†–æ–∑—Ä–æ–±–Ω–∏–∫ –ø—É—à–∏—Ç—å –∫–æ–¥ ‚Üí GitHub Actions –∑–∞–ø—É—Å–∫–∞—î –ø–∞–π–ø–ª–∞–π–Ω
2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚Üí –ó–±—ñ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑—É ‚Üí –ü—É—à –≤ registry
3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è Helm —á–∞—Ä—Ç—É ‚Üí Flux –≤–∏—è–≤–ª—è—î –∑–º—ñ–Ω–∏
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```
tf-test-w7/
‚îú‚îÄ‚îÄ main.tf                 # –û—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ main-simple.tf          # –°–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è
‚îú‚îÄ‚îÄ variables.tf            # –ó–º—ñ–Ω–Ω—ñ
‚îú‚îÄ‚îÄ outputs.tf              # –í–∏–≤–æ–¥–∏
‚îú‚îÄ‚îÄ outputs-simple.tf       # –í–∏–≤–æ–¥–∏ –¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó
‚îú‚îÄ‚îÄ vars.tfvars            # –ó–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö
‚îú‚îÄ‚îÄ vars.tfvars.example    # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö
‚îú‚îÄ‚îÄ Makefile               # –ö–æ–º–∞–Ω–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
‚îú‚îÄ‚îÄ README.md              # –û—Å–Ω–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ INSTALL.md             # –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ TROUBLESHOOTING.md     # –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º
‚îú‚îÄ‚îÄ DELIVERABLES.md        # –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å
‚îú‚îÄ‚îÄ LICENSE                # MIT –ª—ñ—Ü–µ–Ω–∑—ñ—è
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ .github/workflows/     # CI/CD –ø–∞–π–ø–ª–∞–π–Ω
‚îú‚îÄ‚îÄ flux-manifests/        # Flux –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∏
‚îî‚îÄ‚îÄ scripts/               # –°–∫—Ä–∏–ø—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è –∑–∞–º–æ–≤–Ω–∏–∫–∞

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
```bash
git clone <repository-url>
cd tf-test-w7
cp vars.tfvars.example vars.tfvars
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ vars.tfvars
```

### 2. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
```bash
# –î–ª—è GKE
make setup-gke

# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
make local-test
```

### 3. –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É
```bash
make deploy-kbot
make status
```

## üí∞ –í–∞—Ä—Ç—ñ—Å—Ç—å —Ç–∞ —á–∞—Å

- **–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** 4-6 –≥–æ–¥–∏–Ω
- **–í–∞—Ä—Ç—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏:** $350
- **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** –°–µ—Ä–µ–¥–Ω—è
- **–ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å:** 100% ‚úÖ

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–≤–Ω—ñ—Å—Ç—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ GitOps —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è–º –Ω–∞ GKE
- ‚úÖ Flux CD –¥–ª—è GitOps
- ‚úÖ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–æ–º
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∏–º —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º
- ‚úÖ –ü–æ–≤–Ω–æ—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é
- ‚úÖ –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—é –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- ‚úÖ –í–∏—Ä—ñ—à–µ–Ω–Ω—è–º –≤—Å—ñ—Ö –ø—Ä–æ–±–ª–µ–º

**–ì–æ—Ç–æ–≤–æ –¥–ª—è –∑–∞–º–æ–≤–Ω–∏–∫–∞! üöÄ** 